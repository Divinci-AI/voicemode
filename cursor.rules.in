# Cursor Rules for Voice Mode

This file is auto-generated by 'make cursor.rules'. Do not edit directly.
Last generated: @TIMESTAMP@

## Project Context

You are working on Voice Mode, a project that enables natural voice conversations for AI assistants through the Model Context Protocol (MCP).

## Key Terminology

@include GLOSSARY.md

## Code Style Guidelines

- Follow existing patterns in the codebase
- Prefer clarity over cleverness
- Add type hints for Python code
- Use descriptive variable names
- Keep functions focused and single-purpose

## Voice Mode Specific Rules

When working with voice-related code:
- Always handle audio operations within try/except blocks
- Use the audio_operation_lock for any stdio-sensitive operations
- Follow the streaming patterns established in streaming.py
- Respect the provider registry's automatic failover logic

## Current Focus

@include-section docs/tasks/README.md "## The One Thing" 10

## Testing Requirements

- Write tests for new functionality
- Run existing tests before committing changes
- Use pytest for Python testing
- Mock external services in tests

## Common Patterns

### Adding a new MCP tool:
```python
@mcp.tool()
async def tool_name(param: str) -> str:
    """Tool description for MCP discovery."""
    # Implementation
```

### Working with providers:
```python
# Let the system auto-select providers
client, voice = await get_tts_client_and_voice()
# Don't manually check provider availability
```

## Important Files

- voice_mode/config.py - All configuration and environment variables
- voice_mode/providers.py - Provider selection logic
- voice_mode/tools/conversation.py - Main voice interaction tools
- docs/configuration/environment.md - Environment variable reference
